<html>
  <head>
    <title>Hyperbolic Cellular Automata Simulator</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body>
    <div id="header">
      <div id="variant-menu">
        <div class="dropdown">
          <button id="variant-button">â‰¡</button>
          <div class="dropdown-content">
            <button id="btn-original" title="Swap to the Conway's Variant" class="">
              Conway's Game of Life
            </button>
            <button id="btn-immigration" title="Swap to the Immigration Variant" class="">
              Immigration Game
            </button>
            <button id="btn-rainbow" title="Swap to the Rainbow Variant" class="">
              Rainbow Game of Life
            </button>
          </div>
        </div>
        <div id="variant-name">Conway's Game of Life</div>
      </div>
      <div id="references">
        <a href="help.html">Help</a>
      </div>
    </div>

    <div id="main">
      <div id="main-row">
        <!--Main toolbar, containing most useful buttons-->
        <!-- other tools -->
        <div id="left-sidebar">
          <!-- misc status information -->
          <div>
            <button id="btn-db-save" title="(Ctrl+S) Save state to the local database">Save</button>
            <button id="btn-db-load" title="(Ctrl+O) Load state from the local database">
              Open
            </button>
            
            <button id="btn-export-svg" title="Export image as SVG">SVG</button>
          </div>
          <div id="tiling">
            Tiling

            <div id="tiling-input">
              &#123; <input id="entry-p" type="number" class="short" placeholder="p" />
              <input id="entry-q" type="number" class="short" placeholder="q" /> &#125;
            </div>

            <button id="btn-set-grid" title="Apply grid">Set</button>

            
          </div>

          <div id="rules">
            <span id="controls-rule-simple">
              Rule<br />
              <div id="rule-variants">
                <div id="rule-variant-labels">
                  <div id="rule-selction-label">Rule Selection</div>
                  <div id="updating-label">Updating</div>
                </div>
                <div id="rule-selection-menu">
                  <div class="dropdown">
                    <button id="rule-selection-button">Static</button>
                    <div class="dropdown-content">
                      <button id="btn-static" >
                        Static
                      </button>
                      <button id="btn-dynamic" title="Dynamic Rule Selection">
                        Dynamic
                      </button>
                    </div>
                  </div>
                  <div class="dropdown">
                    <button id="updating-button">Synchronous</button>
                    <div class="dropdown-content">
                      <button id="btn-synch" >
                        Synchronous
                      </button>
                      <button id="btn-asynch" title="Asynchronous">Asynchronous</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <input id="rule-entry" />
              <div id="additional-rules-container" class="hidden">
                <input id="rule-entry-1" />
                <input id="rule-entry-2" />
              </div>

              <button id="btn-set-rule" title="Apply this rule">Set</button>
              
            </span>
            <!--For future clean-ups-->
            <span id="controls-rule-generic" style="display: none">
              Generic rule<br />
            </span>
          </div>

          
          <!--
          <div class="control-group">
            <button id="view-straighten" title="(Alt+S) Fix rotation and position of the view">
              Straighten view
            </button>
          </div>
          -->
          <div class="control-group" style="display: none">
            <button id="btn-mem-set" title="(M) Store field in the momory">MS</button>
            <button id="btn-mem-get" title="(U) Restore field from memory">MR</button>
            <button id="btn-mem-clear" title="(Alt+M) Clear memory">MC</button>
          </div>
          
          <div class="control-group" style="display: none">
            <button id="btn-search" title="(S) Search for all cell groups in the field">
              Search
            </button>
          </div>
          
          
          <div class="control-group" style="display: none">
            Export <br />
            <button id="btn-export" title="Export whole field to text">All</button>
            <button id="btn-exp-visible" title="Export visible part of the field to text">
              Visible
            </button>
          </div>
          
          
          
          <!--Animation (i don't get this)-->
          <div class="control-group" id="animate-controls" style="display: none">
            Upload animation<br />
            <input id="upload-name" type="text" value="frame-{0}.png" />

            <div class="control-table">
              <div>
                <div>Size:</div>
                <div>
                  <input
                    id="animate-size"
                    class="medium"
                    type="number"
                    value="640"
                    title="Image size in pixels"
                  />
                </div>
              </div>
              <div>
                <div>Steps:</div>
                <div>
                  <input
                    id="animate-generations"
                    class="medium"
                    type="number"
                    value="1"
                    title="How many generations to simulate for"
                  />
                </div>
              </div>
              <div>
                <div>Frames/step:</div>
                <div>
                  <input
                    id="animate-frame-per-generation"
                    class="medium"
                    type="number"
                    value="10"
                  />
                </div>
              </div>
            </div>
            <br />

            <div class="control-table">
              <div>
                <div>Start:</div>
                <div>
                  <button
                    id="animate-set-start"
                    title="Set initial position for animation. Hint: use straighten view button"
                  >
                    Set</button
                  ><button id="animate-view-start">View</button>
                </div>
              </div>
              <div>
                <div>End:</div>
                <div>
                  <button
                    id="animate-set-end"
                    title="Set final position for animation. Hint: use straighten view button"
                  >
                    Set</button
                  ><button id="animate-view-end">View</button>
                </div>
              </div>
            </div>
            <button
              id="btn-animate-derotate"
              title="Try to offset start and end points by equal amount so that translation metween them become straight path, and orient that path vertically. Useful for filming spaceships. Not always possible."
            >
              Derotate
            </button>
            <button id="btn-upload-animation">Upload animation</button>
            <button id="btn-animate-cancel" style="display: none" class="dangerous">
              Cancel upload
            </button>
          </div>
        </div>

        <!-- Main content -->
        <div id="main-content">
          
          

          <!-- Main control -->

          <div id="canvas-container" tabindex="0">
            <canvas id="canvas" width="600" height="600"></canvas>
          </div>
        </div>
          <div id="toolbar">
          <div id="state-selector" style="display: none">
            <div>States</div>
            <span id="state-selector-buttons"></span>
          </div>
          
          <div class="button-group">
            <button id="btn-reset" class="dangerous" title="(C) Clear field and reset view">
              Reset
            </button>
            <button id="btn-random" title="(R) Fill with random cells" style="display: none">Random</button>
          </div>
          <div class="button-group">
            <button id="btn-step" title="(N) Evaluate for one generation">Step</button>
          </div>
          <div class="button-group">

            <button id="btn-play-start" title="(G or Space) Start continuous evaluation">
              Go
            </button>
            <button
              id="btn-play-stop"
              style="display: none"
              class="button-active"
              title="(G or Space) Stop continuous evaluation"
            >
              Stop
            </button>
          </div>
        
        </div>
        
        <div id="right-sidebar">
          
            <button
              id="btn-mode-edit"
              title="(E) Use left button to edit, middle or left+shift to pan"
            >
              Edit
            </button>
          
              <button
                id="btn-mode-pan"
                title="(P) Use left button to pan, middle or left+shift to edit"
              >
                Pan
              </button>

          <span class="button-group">
            <button id="btn-nav-home" title="(H) Navigate to the origin">Home</button>
          </span>

          <div id="statusbar">
            <div class="control-table">
              <div>
                <div>Neighbors:</div>
                <div><span id="grid-num-neighbors" class="numdisplay"></span></div>
              </div>
              <div>
                <div>Population:</div>
                <div><span id="population" class="numdisplay"></span></div>
              </div>
              <div>
                <div>Generation:</div>
                <div><span id="generation" class="numdisplay"></span></div>
              </div>
            </div>
          </div>
          <div id="navigator">
            <!--<button id="btn-nav-clear" style="display: none" title="Clear list of cell groups">
              Clear
            </button>-->
            <div id="navigator-wrap">
              <div id="navigator-cluster-list"></div>
            </div>
          </div>
        
      </div>
    </div>

    <!-- popup dialogs ets -->

    <div id="export-dialog" style="display: none" class="popup-container">
      <div class="popup-shadow"></div>
      <div class="popup">
        <h1>Export data</h1>
        <textarea
          id="export"
          style="width: 100%"
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="false"
          class="code-entry"
        ></textarea>
        <div class="toolbar">
          <button id="btn-export-close">OK</button>
        </div>
      </div>
    </div>
    <div id="import-dialog" style="display: none" class="popup-container">
      <div class="popup-shadow"></div>
      <div class="popup">
        <h1>Import data</h1>
        <textarea
          id="import"
          style="width: 100%"
          height="50%"
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="false"
          class="code-entry"
        ></textarea>
        <div class="toolbar">
          <button id="btn-rainbow-run">OK</button>
          <button id="btn-rainbow-cancel">Cancel</button>
        </div>
      </div>
    </div>
    <!-- Dialog to load data to indexed DB -->
    <div id="file-dialog-open" style="display: none" class="popup-container">
      <div class="popup-shadow"></div>
      <div class="popup">
        <h1>Load from local database</h1>
        <div class="toolbar">
          Showing: <button id="toggle-all-grids">All grids</button>
          <button id="toggle-all-rules">All rules</button>
        </div>
        <div id="file-dialog-files"></div>
        <div class="toolbar">
          <button id="btn-files-cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Dialog to save data to indexed DB -->
    <div id="file-dialog-save" style="display: none" class="popup-container">
      <div class="popup-shadow"></div>
      <div class="popup">
        <h1>Save to local database</h1>
        <div class="dialog-content">
          Save as: <input id="file-dialog-save-as" class="wide" value="" />
        </div>

        <div class="toolbar">
          <button id="file-dialog-save-btn">Save</button>
          <button id="btn-files-save-cancel">Cancel</button>
        </div>
        <hr />
        <div id="file-dialog-save-files"></div>
      </div>
    </div>

    <!-- Dialog to save SVG -->
    <div id="svg-export-dialog" style="display: none" class="popup-container">
      <div class="popup-shadow"></div>
      <div class="popup">
        <h1>Export to SVG</h1>
        <div class="dialog-content">
          <div id="svg-image-container">[Image]</div>
        </div>
        <div class="toolbar">
          <button id="btn-svg-export-dialog-close">OK</button>
        </div>
      </div>
    </div>

    <script src="application.js"></script>
  </body>
</html>
